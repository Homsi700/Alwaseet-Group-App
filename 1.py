import os

def generate_folder_tree(startpath, output_file='folder_tree.txt', indent_char='    '):
    """
    ููุดุฆ ูููู ุดุฌุฑู ูููุฌูุฏุงุช ูุงููููุงุช ุฏุงุฎู ูุณุงุฑ ูุนูู.

    Args:
        startpath (str): ุงููุณุงุฑ ุงูุฃุณุงุณู ูููุฌูุฏ ุงูุฐู ุณูุชู ุชุญููู ููููู.
        output_file (str): ุงุณู ุงูููู ุงูุฐู ุณูุชู ุญูุธ ุงููููู ููู.
        indent_char (str): ุงูุฃุญุฑู ุงููุณุชุฎุฏูุฉ ูููุณุงูุฉ ุงูุจุงุฏุฆุฉ (ุงูุชุฑุงุถู: 4 ูุณุงูุงุช).
    """
    # ูุงุฆูุฉ ุงููุฌูุฏุงุช ุงูุชู ุณูุชู ุงุณุชุซูุงุคูุง (ูุซู ูุฌูุฏุงุช ุงูููุชุจุงุชุ ูุฌูุฏุงุช Gitุ ุฅูุฎ)
    exclude_dirs = [
        '__pycache__',   # ูุฌูุฏุงุช ุจุงูุซูู ุงููุคูุชุฉ
        '.git',          # ูุฌูุฏุงุช Git ููุชุญูู ุจุงูุฅุตุฏุงุฑ
        'venv',          # ุจูุฆุงุช ุจุงูุซูู ุงูุงูุชุฑุงุถูุฉ
        'node_modules',  # ูุฌูุฏ ููุชุจุงุช JavaScript/TypeScript (ุงูุถุฎู!)
        '.vscode',       # ุฅุนุฏุงุฏุงุช VS Code
        '.idea',         # ุฅุนุฏุงุฏุงุช PyCharm/IntelliJ IDEA
        'build',         # ูุฌูุฏุงุช ุงูุจูุงุก
        'dist',          # ูุฌูุฏุงุช ุงูุชูุฒูุน
        '__MACOSX'       # ูุฌูุฏุงุช ูุคูุชุฉ ูู macOS ุนูุฏ ูู ุงูุถุบุท
    ]
    # ูุงุฆูุฉ ุงููููุงุช ุงูุชู ุณูุชู ุงุณุชุซูุงุคูุง (ูููุงุช ุงูุฅุนุฏุงุฏุงุชุ ูููุงุช READMEุ ุฅูุฎ)
    exclude_files = [
        '.gitignore',    # ูููุงุช Git ูุชุฌุงูู ุงููููุงุช
        '.env',          # ูููุงุช ุงููุชุบูุฑุงุช ุงูุจูุฆูุฉ
        'pyproject.toml', # ุฅุนุฏุงุฏุงุช ูุดุงุฑูุน ุจุงูุซูู ุงูุญุฏูุซุฉ
        'package-lock.json', # ูููุงุช ููู ุงูุชุจุนูุงุช ูู Node.js
        'yarn.lock',     # ูููุงุช ููู ุงูุชุจุนูุงุช ูู Yarn
        'README.md',     # ูููุงุช ุงูู Readme
        'LICENSE'        # ูููุงุช ุงูุชุฑุฎูุต
    ]

    print(f"ุฌุงุฑู ุฅูุดุงุก ูููู ุงููุฌูุฏ ูู: {startpath}")
    print(f"ุณูุชู ุญูุธ ุงููุชุงุฆุฌ ูู: {output_file}")

    with open(output_file, 'w', encoding='utf-8') as f:
        f.write(f"Folder Tree for: {os.path.basename(startpath)}\n")
        f.write("=" * 30 + "\n\n")

        for root, dirs, files in os.walk(startpath):
            # ุงุญุณุจ ูุณุชูู ุงูุชุนูู ุงูุญุงูู
            level = root.replace(startpath, '').count(os.sep)
            # ุฃูุดุฆ ุงููุณุงูุฉ ุงูุจุงุฏุฆุฉ ุจูุงุกู ุนูู ุงููุณุชูู
            indent = indent_char * level

            # ูู ุจุชุตููุฉ ุงููุฌูุฏุงุช ุงููุณุชุซูุงุฉ ูุจู ุงููุชุงุจุนุฉ ุฅูููุง
            # ูุฌุจ ุชุนุฏูู 'dirs' ูู ุงูููุงู ููู ูุง ูููู os.walk ุจุฒูุงุฑุชูุง
            dirs[:] = [d for d in dirs if d not in exclude_dirs]

            # ุงูุชุจ ุงุณู ุงููุฌูุฏ ุงูุญุงูู
            # ูุง ููุชุจ ุงููุฌูุฏ ุงูุฃุณุงุณู ูุฑุฉ ุฃุฎุฑู ูู ุงูุจุฏุงูุฉ ูุฃูู ููุชูุจ ูู ุงูุนููุงู
            if root != startpath:
                f.write(f'{indent}๐ {os.path.basename(root)}/\n')
            else: # ูููุฌูุฏ ุงูุฌุฐุฑุ ูุง ุชุถุน ุจุงุฏุฆุฉ ูููู ุงูุชุจ ุงุณูู
                 f.write(f'๐ {os.path.basename(root)}/\n')


            # ุงูุชุจ ุงููููุงุช ุฏุงุฎู ุงููุฌูุฏ ุงูุญุงูู
            # ุงููุณุงูุฉ ุงูุจุงุฏุฆุฉ ูููููุงุช ูุฌุจ ุฃู ุชููู ุฃูุจุฑ ุจูุณุชูู ูุงุญุฏ ูู ุงููุฌูุฏ
            file_indent = indent_char * (level + 1)
            for file in sorted(files): # ูุชุฑุชูุจ ุงููููุงุช ุฃุจุฌุฏููุง
                if file not in exclude_files:
                    f.write(f'{file_indent}๐ {file}\n')
    print("\nโ ุชู ุงูุงูุชูุงุก ูู ุฅูุดุงุก ููู ูููู ุงููุฌูุฏ.")
    print(f"ููููู ูุชุญ ุงูููู '{output_file}' ูุฑุคูุฉ ุงููููู.")


if __name__ == "__main__":
    # --- ููููุฉ ุงูุงุณุชุฎุฏุงู ---

    # ุงุทูุจ ุงููุณุงุฑ ูู ุงููุณุชุฎุฏู ุนูุฏ ุงูุชุดุบูู
    project_folder_path = input("ุงูุฑุฌุงุก ุฅุฏุฎุงู ุงููุณุงุฑ ุงููุงูู ูููุฌูุฏ ุงูุฐู ุชุฑูุฏ ุชุญููู ููููู (ุฃู ุงุถุบุท Enter ูููุฌูุฏ ุงูุญุงูู): ").strip()

    # ุฅุฐุง ุชุฑู ุงููุณุชุฎุฏู ุงูุฅุฏุฎุงู ูุงุฑุบูุงุ ุงุณุชุฎุฏู ุงููุฌูุฏ ุงูุญุงูู ุงูุฐู ูุชู ุชุดุบูู ุงูุณูุฑุจุช ููู
    if not project_folder_path:
        project_folder_path = os.getcwd()
        print(f"ูู ูุชู ุชุญุฏูุฏ ูุณุงุฑุ ุณูุชู ุงุณุชุฎุฏุงู ุงููุฌูุฏ ุงูุญุงูู: {project_folder_path}")

    # ุชุญูู ููุง ุฅุฐุง ูุงู ุงููุณุงุฑ ุงููุฏุฎู ููุฌูุฏูุง ููู ูุฌูุฏ ูุนูุงู
    if not os.path.isdir(project_folder_path):
        print(f"โ ุฎุทุฃ: ุงููุณุงุฑ '{project_folder_path}' ุบูุฑ ููุฌูุฏ ุฃู ููุณ ูุฌูุฏูุง. ูุฑุฌู ุงูุชุญูู ูู ุงููุณุงุฑ ูุงููุญุงููุฉ ูุฑุฉ ุฃุฎุฑู.")
    else:
        generate_folder_tree(project_folder_path)
        